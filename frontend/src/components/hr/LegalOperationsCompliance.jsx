import React, { useState } from 'react';
import { Scale, FileText, BookOpen, FolderOpen, FileSignature, Shield, Search, Download, Eye, ChevronDown, ChevronUp } from 'lucide-react';
import { HR_BYLAWS, HR_SOPS, HR_ANNEXURES } from '../../../backend/seed_data';
import { DEMO_CONTRACTS } from '../../data/hrDemoData';

const LegalOperationsCompliance = () => {
  const [activeSection, setActiveSection] = useState('bylaws');
  const [searchQuery, setSearchQuery] = useState('');
  const [expandedItems, setExpandedItems] = useState({});

  const sections = [
    { id: 'bylaws', name: 'By-Laws', icon: FileText, count: HR_BYLAWS.length, color: 'blue' },
    { id: 'sops', name: 'SOPs', icon: BookOpen, count: HR_SOPS.length, color: 'green' },
    { id: 'annexures', name: 'Forms & Annexures', icon: FolderOpen, count: HR_ANNEXURES.length, color: 'purple' },
    { id: 'contracts', name: 'Contracts', icon: FileSignature, count: DEMO_CONTRACTS.length, color: 'orange' },
    { id: 'compliance', name: 'Compliance Dashboard', icon: Shield, count: null, color: 'red' }
  ];

  const toggleExpand = (id) => {
    setExpandedItems(prev => ({ ...prev, [id]: !prev[id] }));
  };

  return (
    <div className=\"p-6 space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-slate-900\">Legal Operations & Compliance</h1>\n        <p className=\"text-slate-600 mt-1\">Comprehensive legal documentation and compliance management</p>\n      </div>\n\n      {/* Section Tabs */}\n      <div className=\"bg-white rounded-xl p-2 border-2 border-slate-200 shadow-sm\">\n        <div className=\"flex flex-wrap gap-2\">\n          {sections.map((section) => (\n            <button\n              key={section.id}\n              onClick={() => setActiveSection(section.id)}\n              className={`flex items-center space-x-2 px-6 py-3 rounded-lg transition-all font-semibold ${\n                activeSection === section.id\n                  ? `bg-${section.color}-600 text-white shadow-lg`\n                  : 'bg-slate-50 text-slate-700 hover:bg-slate-100'\n              }`}\n            >\n              <section.icon className=\"w-5 h-5\" />\n              <span>{section.name}</span>\n              {section.count && (\n                <span className={`px-2 py-0.5 rounded-full text-xs font-bold ${\n                  activeSection === section.id ? 'bg-white/20' : 'bg-slate-200'\n                }`}>\n                  {section.count}\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Search Bar */}\n      {activeSection !== 'compliance' && (\n        <div className=\"bg-white rounded-xl p-4 border-2 border-slate-200 shadow-sm\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5\" />\n            <input\n              type=\"text\"\n              placeholder={`Search ${sections.find(s => s.id === activeSection)?.name}...`}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-12 pr-4 py-3 border-2 border-slate-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors\"\n            />\n          </div>\n        </div>\n      )}\n\n      {/* By-Laws Section */}\n      {activeSection === 'bylaws' && (\n        <div className=\"space-y-4\">\n          {HR_BYLAWS.filter(bylaw => \n            searchQuery === '' || \n            bylaw.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n            bylaw.description.toLowerCase().includes(searchQuery.toLowerCase())\n          ).map((bylaw) => (\n            <div key={bylaw.section} className=\"bg-white rounded-xl p-6 border-2 border-slate-200 hover:border-blue-400 transition-all shadow-sm\">\n              <div className=\"flex justify-between items-start cursor-pointer\" onClick={() => toggleExpand(`bylaw-${bylaw.section}`)}>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <span className=\"bg-blue-100 text-blue-700 px-4 py-1 rounded-full text-sm font-bold\">\n                      Section {bylaw.section}\n                    </span>\n                    <h3 className=\"text-xl font-bold text-slate-900\">{bylaw.title}</h3>\n                  </div>\n                  <p className=\"text-slate-600 mt-2\">{bylaw.description}</p>\n                  <p className=\"text-sm text-slate-500 mt-2\">{bylaw.subsections} subsections</p>\n                </div>\n                <button className=\"ml-4 text-slate-400 hover:text-slate-600\">\n                  {expandedItems[`bylaw-${bylaw.section}`] ? <ChevronUp className=\"w-6 h-6\" /> : <ChevronDown className=\"w-6 h-6\" />}\n                </button>\n              </div>\n              \n              {expandedItems[`bylaw-${bylaw.section}`] && (\n                <div className=\"mt-4 pt-4 border-t border-slate-200\">\n                  <div className=\"flex space-x-3\">\n                    <button className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm flex items-center\">\n                      <Eye className=\"w-4 h-4 mr-2\" />\n                      View Full Document\n                    </button>\n                    <button className=\"bg-slate-200 text-slate-700 px-6 py-2 rounded-lg hover:bg-slate-300 transition-colors font-semibold text-sm flex items-center\">\n                      <Download className=\"w-4 h-4 mr-2\" />\n                      Download PDF\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* SOPs Section */}\n      {activeSection === 'sops' && (\n        <div className=\"space-y-4\">\n          {HR_SOPS.filter(sop => \n            searchQuery === '' || \n            sop.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n            sop.category.toLowerCase().includes(searchQuery.toLowerCase())\n          ).map((sopCategory) => (\n            <div key={sopCategory.category} className=\"bg-white rounded-xl p-6 border-2 border-slate-200 hover:border-green-400 transition-all shadow-sm\">\n              <div className=\"flex justify-between items-start cursor-pointer\" onClick={() => toggleExpand(`sop-${sopCategory.category}`)}>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-2\">\n                    <span className=\"bg-green-100 text-green-700 px-4 py-1 rounded-full text-sm font-bold\">\n                      Category {sopCategory.category}\n                    </span>\n                    <h3 className=\"text-xl font-bold text-slate-900\">{sopCategory.title}</h3>\n                  </div>\n                  <p className=\"text-sm text-slate-500 mt-2\">{sopCategory.sops.length} SOPs in this category</p>\n                </div>\n                <button className=\"ml-4 text-slate-400 hover:text-slate-600\">\n                  {expandedItems[`sop-${sopCategory.category}`] ? <ChevronUp className=\"w-6 h-6\" /> : <ChevronDown className=\"w-6 h-6\" />}\n                </button>\n              </div>\n              \n              {expandedItems[`sop-${sopCategory.category}`] && (\n                <div className=\"mt-4 pt-4 border-t border-slate-200 space-y-2\">\n                  {sopCategory.sops.map((sop, idx) => (\n                    <div key={idx} className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors\">\n                      <div className=\"flex items-center space-x-3\">\n                        <span className=\"font-mono text-sm font-bold text-green-600\">{sop.code}</span>\n                        <span className=\"text-slate-900 font-medium\">{sop.name}</span>\n                      </div>\n                      <div className=\"flex space-x-2\">\n                        <button className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\">View</button>\n                        <button className=\"text-slate-600 hover:text-slate-700 text-sm font-semibold\">Download</button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Annexures Section */}\n      {activeSection === 'annexures' && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {HR_ANNEXURES.filter(annexure => \n            searchQuery === '' || \n            annexure.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n            annexure.category.toLowerCase().includes(searchQuery.toLowerCase())\n          ).map((annexure) => (\n            <div key={annexure.code} className=\"bg-white rounded-xl p-5 border-2 border-slate-200 hover:border-purple-400 transition-all shadow-sm\">\n              <div className=\"flex justify-between items-start mb-3\">\n                <span className=\"bg-purple-100 text-purple-700 px-3 py-1 rounded text-xs font-bold\">\n                  {annexure.code}\n                </span>\n                <span className=\"bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs font-semibold\">\n                  {annexure.category}\n                </span>\n              </div>\n              <h3 className=\"text-base font-bold text-slate-900 mb-3 line-clamp-2\">{annexure.name}</h3>\n              <div className=\"space-y-2 mb-4\">\n                <div className=\"flex items-center text-sm\">\n                  <span className=\"text-slate-500 mr-2\">Format:</span>\n                  <span className=\"text-slate-900 font-medium\">{annexure.format}</span>\n                </div>\n                <div className=\"flex items-center text-sm\">\n                  <span className=\"text-slate-500 mr-2\">Approval:</span>\n                  <span className=\"text-slate-900 font-medium text-xs\">{annexure.approval}</span>\n                </div>\n              </div>\n              <div className=\"flex space-x-2\">\n                <button className=\"flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm font-semibold\">\n                  View\n                </button>\n                <button className=\"bg-slate-200 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors\">\n                  <Download className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Contracts Section */}\n      {activeSection === 'contracts' && (\n        <div className=\"space-y-4\">\n          {DEMO_CONTRACTS.filter(contract => \n            searchQuery === '' || \n            contract.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n            contract.party.toLowerCase().includes(searchQuery.toLowerCase())\n          ).map((contract) => (\n            <div key={contract.id} className=\"bg-white rounded-xl p-6 border-2 border-slate-200 hover:border-orange-400 transition-all shadow-sm\">\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center space-x-3 mb-3\">\n                    <span className=\"bg-orange-100 text-orange-700 px-4 py-1 rounded-full text-sm font-bold\">\n                      {contract.type}\n                    </span>\n                    <h3 className=\"text-xl font-bold text-slate-900\">{contract.title}</h3>\n                  </div>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                    <div>\n                      <p className=\"text-xs font-semibold text-slate-500\">Party</p>\n                      <p className=\"text-sm font-medium text-slate-900\">{contract.party}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs font-semibold text-slate-500\">Start Date</p>\n                      <p className=\"text-sm font-medium text-slate-900\">{new Date(contract.startDate).toLocaleDateString()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs font-semibold text-slate-500\">End Date</p>\n                      <p className=\"text-sm font-medium text-slate-900\">{new Date(contract.endDate).toLocaleDateString()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs font-semibold text-slate-500\">Value</p>\n                      <p className=\"text-sm font-medium text-slate-900\">{contract.value}</p>\n                    </div>\n                  </div>\n                </div>\n                <span className={`px-4 py-2 rounded-lg text-xs font-semibold ml-4 ${\n                  contract.status === 'Active' ? 'bg-green-100 text-green-700' :\n                  contract.status === 'Expiring Soon' ? 'bg-orange-100 text-orange-700' :\n                  'bg-red-100 text-red-700'\n                }`}>\n                  {contract.status}\n                </span>\n              </div>\n              <div className=\"flex space-x-3 mt-4\">\n                <button className=\"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors font-semibold text-sm flex items-center\">\n                  <Eye className=\"w-4 h-4 mr-2\" />\n                  View Contract\n                </button>\n                <button className=\"bg-slate-200 text-slate-700 px-6 py-2 rounded-lg hover:bg-slate-300 transition-colors font-semibold text-sm flex items-center\">\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Download\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Compliance Dashboard */}\n      {activeSection === 'compliance' && (\n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"bg-white rounded-xl p-6 border-2 border-green-200 shadow-sm\">\n              <Shield className=\"w-10 h-10 text-green-600 mb-3\" />\n              <p className=\"text-3xl font-bold text-slate-900\">95%</p>\n              <p className=\"text-sm text-slate-600\">Compliance Score</p>\n            </div>\n            <div className=\"bg-white rounded-xl p-6 border-2 border-blue-200 shadow-sm\">\n              <FileText className=\"w-10 h-10 text-blue-600 mb-3\" />\n              <p className=\"text-3xl font-bold text-slate-900\">{HR_BYLAWS.length + HR_SOPS.length + HR_ANNEXURES.length}</p>\n              <p className=\"text-sm text-slate-600\">Total Documents</p>\n            </div>\n            <div className=\"bg-white rounded-xl p-6 border-2 border-orange-200 shadow-sm\">\n              <FileSignature className=\"w-10 h-10 text-orange-600 mb-3\" />\n              <p className=\"text-3xl font-bold text-slate-900\">{DEMO_CONTRACTS.filter(c => c.status === 'Expiring Soon').length}</p>\n              <p className=\"text-sm text-slate-600\">Contracts Expiring</p>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl p-6 border-2 border-slate-200 shadow-sm\">\n            <h2 className=\"text-xl font-bold text-slate-900 mb-4\">Compliance Checklist</h2>\n            <div className=\"space-y-3\">\n              {[\n                { item: 'All By-Laws Documented', status: 'completed' },\n                { item: 'SOPs Updated (Current Year)', status: 'completed' },\n                { item: 'Mandatory Forms Available', status: 'completed' },\n                { item: 'Active Contracts Monitored', status: 'completed' },\n                { item: 'Annual Policy Review', status: 'pending' },\n                { item: 'HIPAA Compliance Audit', status: 'completed' },\n                { item: 'ISO Certification Renewal', status: 'in-progress' }\n              ].map((item, idx) => (\n                <div key={idx} className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg\">\n                  <span className=\"text-slate-900 font-medium\">{item.item}</span>\n                  <span className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                    item.status === 'completed' ? 'bg-green-100 text-green-700' :\n                    item.status === 'in-progress' ? 'bg-blue-100 text-blue-700' :\n                    'bg-orange-100 text-orange-700'\n                  }`}>\n                    {item.status === 'completed' ? 'Completed' : item.status === 'in-progress' ? 'In Progress' : 'Pending'}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LegalOperationsCompliance;
